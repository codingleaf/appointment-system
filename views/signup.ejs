<%- include('./partials/header.ejs') %>
  <h1>SIGN UP</h1>
  <form action="/signup" method="POST">
    <div>
      <label for="firstName">First Name: </label>
      <input type="text" id="firstName" name="firstName" required>
    </div>
    <div>
      <label for="lastName">Last Name: </label>
      <input type="text" id="lastName" name="lastName" required>
    </div>
    <div>
      <label for="email">Email: </label>
      <input type="email" id="email" name="email" required>
    </div>
    <div>
      <label for="password">Password: </label>
      <input type="password" id="password" name="password" required>
    </div>
    <button type="submit">Sign Up</button>
  </form>
  <a href="/login">Already have an account? Login</a>

  <script>
    const form = document.querySelector('form')
    form.addEventListener('submit', async (e) => {
      // prevent page from refreshing
      e.preventDefault();

      const firstName = form.firstName.value;
      const lastName = form.lastName.value;
      const email = form.email.value;
      const password = form.password.value;
      const role = 'basic';

      try {
        const res = await fetch('/signup', {
          method: "POST",
          body: JSON.stringify({ firstName, lastName, email, password, role }),
          headers: {'Content-Type': 'application/json'}
        })
      }
      catch(err) {
        console.error(err);
      }
    })
  </script>

<%- include('./partials/footer.ejs') %>